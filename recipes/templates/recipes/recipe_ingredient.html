{% extends 'main/base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block content %}

    <h3>Recipe Detail</h3>
    <div class="box-element">
        <div><strong>Title:</strong> {{recipe.title|capfirst}} ({{recipe.shortname}})</div>
        <div><strong>Description:</strong> {{recipe.description}}</div>
        <div><strong>Image:</strong> {{recipe.image}}</div>
        <div><strong>Plating Image:</strong> {{recipe.platingimage}}</div>
        <div><strong>Servings:</strong> {{recipe.servings}}</div>
        <div><strong>preptime:</strong> {{recipe.preptime}}</div>
        <div><strong>cooktime :</strong> {{recipe.cooktime}}</div>
        <div><strong>directions:</strong> {{recipe.directions}}</div>




    </div>
<br>
    <form method="post" id="ingredient_form" data-ingredients-url="{% url 'ajax-load-ingredients' %}">
        {% csrf_token %}
        {{ formset.management_form }}
        {% for form in formset %}

            {{form.category.label}}
            {% render_field form.category class+="category-drop"%}
            {{form.ingredient.label}}
            {{form.ingredient}}
            {{form.uom.label}}
            {{form.uom}}
            {{form.quantity.label}}
            {{form.quantity}}
            {{form.destination.label}}
            {{form.destination}}


            <hr>
        {% endfor %}



         <input class="btn btn-success" type="submit" value="Save">
    </form>

























<!--&lt;!&ndash;TODO fare esterno&ndash;&gt;-->

<!--<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>-->
<!--<script type="application/javascript" >-->

<!--    // $("#id_recipeitem_set-0-category").change(function (){-->

<!--    $('.category-drop').change(function (){-->
<!--        var idcatdorp=this.id-->
<!--      //  alert(idcatdorp)-->
<!--        // TODO monitorare se funziona-->
<!--        indd=idcatdorp.match(/\d+/); // 123456-->
<!--      //  alert(indd)-->
<!--        // devo ottenere id_recipeitem_set-0-goodandservice-->

<!--        var indgoodandsedrop = 'id_recipeitem_set-'+indd+'-ingredient'-->
<!--      //  alert(indgoodandsedrop)-->
<!--     // $('#'+idcatdorp).empty();-->

<!--        const url = $("#ingredient_form").attr("data-ingredients-url");-->
<!--        // alert(url)-->
<!--        const catId=$(this).val()-->
<!--        //    alert(catId)-->
<!--        $('#'+indgoodandsedrop).empty()-->
<!--        $.ajax({-->
<!--            url: url,-->
<!--            data: {-->
<!--                'category_id': catId // add gas id in get parameter-->
<!--            },-->
<!--            success: function (data){-->
<!--                //alert('sua')-->
<!--                //  $('#id_goodOrService').empty();-->



<!--                for (let index in data){-->
<!--                    //  alert(data[index].id+data[index].name );-->
<!--                    $('#'+indgoodandsedrop).append($('<option>',-->
<!--                        {-->
<!--                            value: data[index].id,-->
<!--                            text: data[index].name-->
<!--                        }));-->
<!--                }-->

<!--                // alert("succ" + data[3].id)-->
<!--            }-->





<!--        })-->

<!--    });-->
<!--</script>-->









{% endblock content %}




